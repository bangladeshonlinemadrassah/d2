<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ALIM-26 "Final Stage Preparation Course" (BOM)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla:wght@400;700&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0ea5e9;
      --primary-dark: #0369a1;
      --secondary: #22c55e;
      --accent: #a855f7;
      --danger: #ef4444;
      --warning: #eab308;
      --dark: #020617;
      --darker: #000000;
      --light: #f1f5f9;
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --card-bg: rgba(15, 23, 42, 0.85);
      --card-border: rgba(255, 255, 255, 0.2);
      --glass: rgba(2, 6, 23, 0.75);
      --glass-border: rgba(255, 255, 255, 0.25);
      --gradient-primary: linear-gradient(135deg, #22c55e 0%, #39c2a2 50%, #F0FFF0 100%);
      --gradient-secondary: linear-gradient(135deg, #a855f7 0%, #ec4899 50%, #f97316 100%);
      --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.2);
      --shadow-md: 0 10px 24px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 16px 32px rgba(0, 0, 0, 0.35);
      --shadow-xl: 0 24px 48px rgba(0, 0, 0, 0.4);
      --radius: 16px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --font-primary: 'Poppins', sans-serif;
      --font-bangla: 'Tiro Bangla', serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      background: var(--darker);
      color: var(--text);
      font-family: var(--font-primary);
      line-height: 1.6;
      min-height: 100vh;
      overflow-x: hidden;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    body::-webkit-scrollbar {
      display: none;
    }

    /* Default Page Styles */
    #default-page {
      font-family: "Poppins", sans-serif;
      color: white;
      background: linear-gradient(135deg, #14002b, #260042, #000000, #32005f, #001f3f);
      background-size: 500% 500%;
      animation: gradientShift 18s ease infinite;
      background-attachment: fixed;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* HEADER */
    #default-page header {
      display: block;
      text-align: center;
      padding: 7px 10px;
      background: linear-gradient(90deg, #3a0ca3aa, #7209b7aa, #f72585aa);
      border-bottom-left-radius: 12px;
      border-bottom-right-radius: 12px;
    }

    #default-page header .logo h3 {
      font-family: "Russo One", sans-serif;
      font-size: 40px;
      letter-spacing: 2px;
      background: linear-gradient(90deg, #ff00ff, #00eaff, #ffea00, #ff6bcb, #00ff55);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 12px #ffffff55;
      display: inline-block;
      margin: 6px 0;
    }
    
    /* TITLE */
    #default-page h1 {
      text-align: center;
      font-size: 38px;
      margin-top: 20px;
      font-family: "Russo One", sans-serif;
      background: linear-gradient(90deg, #ff00ff, #00eaff, #ffea00, #ff6bcb, #00ff55);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 12px #ffffff55;
    }

    #default-page h2 {
      text-align: center;
      margin-top: 5px;
      font-size: 18px;
      opacity: 0.85;
      color: #e5dfff;
    }

    /* BANNER */
    #default-page .teacher-banner img {
      width: 98%;
      height: 200px;
      display: block;
      margin: 25px auto;
      border-radius: 22px;
      object-fit: cover;
      border: 3px solid #00c3ff;
      box-shadow: 0 8px 30px #00000088;
    }

    /* MAIN BUTTON */
    #default-page .main-btn {
      margin: 25px auto;
      padding: 18px 45px;
      display: block;
      font-size: 22px;
      font-weight: 700;
      text-align: center;
      border-radius: 50px;
      cursor: pointer;
      background: linear-gradient(45deg, #ff00c8, #00eaff, #ffea00, #ff0080, #00ff55);
      background-size: 400% 400%;
      animation: glowMove 4s linear infinite;
      color: white;
      border: none;
      box-shadow: 0 0 25px #ff00ff88;
      width: fit-content;
    }

    @keyframes glowMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* MOTIVATION BOX */
    #default-page .motivation-box {
      width: 90%;
      margin: 20px auto 35px;
      padding: 18px 20px;
      background: linear-gradient(135deg, #ffffff10, #00eaff22, #ff00c822);
      border-radius: 18px;
      text-align: center;
      border: 2px solid #00eaff66;
      box-shadow: 0 0 25px #00eaff44;
      height: 80px; /* Fixed height */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #default-page .motivation-box p {
      font-size: 18px;
      font-weight: 600;
      color: #00ffea;
      animation: fadeText 1s ease;
      margin: 0;
    }

    /* COURSES */
    #default-page .courses {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      width: 90%;
      margin: auto;
      gap: 20px;
    }

    #default-page .course-box {
      background: linear-gradient(135deg, #ffffff10, #8900f522);
      padding: 15px;
      border-radius: 20px;
      text-align: center;
      border: 2px solid #ffffff22;
      box-shadow: 0 0 20px #5500ff55;
    }

    #default-page .course-img img {
      width: 100%;
      height: 140px;
      border-radius: 14px;
      object-fit: cover;
      border: 2px solid #00eaff44;
    }

    #default-page .course-box p {
      margin-top: 10px;
      font-size: 17px;
      color: #ffea00;
      cursor: pointer;
    }

    /* TEACHER BOX */
    #default-page .teacher-box {
      width: 85%;
      margin: 40px auto;
      padding: 35px;
      background: linear-gradient(135deg, #ffffff10, #ff00c822, #00eaff22);
      border-radius: 25px;
      text-align: center;
      border: 3px solid #ff00ff55;
      box-shadow: 0 0 35px #ff00ff55;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    #default-page .single-teacher {
      text-align: center;
    }

    #default-page .single-teacher img {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #00ffe5;
      box-shadow: 0 0 20px #00ffe588;
    }

    #default-page .t-name {
      margin-top: 15px;
      color: #ffea00;
      font-size: 22px;
      font-weight: 700;
      background: linear-gradient(90deg, #ff00ff, #00eaff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 10px #ffea0044;
    }

    #default-page .t-position {
      margin-top: 8px;
      font-size: 18px;
      color: #00ffea;
    }

    #default-page .t-exp {
      margin-top: 5px;
      font-size: 16px;
      color: #e5dfff;
    }

    #default-page .t-summary {
      margin-top: 5px;
      font-size: 14px;
      color: #ffffffcc;
      padding: 0 10px;
    }

    /* FOOTER */
    #default-page footer {
      margin-top: 40px;
      background: linear-gradient(135deg, #1a0033ee, #320059ee, #000522ee);
      padding: 35px 20px;
      text-align: center;
      color: #e2d9ff;
      border-top: 3px solid #ff00ff88;
      box-shadow: 0 -5px 35px #000000aa;
      border-radius: 20px 20px 0 0;
    }

    #default-page footer h3 {
      margin-top: 10px;
      font-size: 22px;
      color: #00eaff;
      font-family: "Pacifico", cursive;
      text-shadow: 0 0 15px #00eaff99;
    }

    #default-page .social-icons img {
      width: 45px;
      margin: 12px;
      border-radius: 12px;
      box-shadow: 0 0 12px #00eaffaa;
    }

    /* MODAL STYLES */
    #default-page .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.8);
      padding-top: 60px;
    }

    #default-page .modal-content {
      position: relative;
      background: linear-gradient(135deg, #1a0033, #320059, #000522);
      margin: 5% auto;
      padding: 30px;
      border: 2px solid #00eaff66;
      width: 80%;
      max-width: 600px;
      border-radius: 20px;
      box-shadow: 0 0 25px #00eaff44;
      text-align: center;
      max-height: 80vh;
      overflow-y: auto;
    }

    #default-page .modal-img {
      width: 100%;
      height: auto;
      border-radius: 14px;
      border: 2px solid #00eaff44;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }

    #default-page .modal-details {
      font-size: 16px;
      line-height: 1.6;
      color: #e5dfff;
      text-align: left;
      padding: 0 15px;
      font-weight: 400;
    }

    #default-page .close {
      position: absolute;
      top: 10px;
      right: 10px;
      color: #fff;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      background: rgba(255, 0, 128, 0.2);
      padding: 5px 10px;
      border: 1px solid #ff00ff;
      border-radius: 0;
      box-shadow: 0 0 10px #ff00ff88;
    }

    #default-page .close:hover,
    #default-page .close:focus {
      color: #ffea00;
      background: rgba(255, 0, 128, 0.4);
      text-decoration: none;
    }

    @media (max-width: 600px) {
      #default-page .courses { grid-template-columns: 1fr; }
      #default-page h1 { font-size: 30px; }
      #default-page .teacher-box { grid-template-columns: 1fr; }
    }

    /* ALIM-26 Website Styles */
    .bangla-font {
      font-family: var(--font-bangla);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 24px;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(20px) saturate(180%);
      background: rgba(2, 6, 23, 0.9);
      border-bottom: 1px solid var(--card-border);
      box-shadow: var(--shadow-md);
    }

    .nav {
      display: flex;
      gap: 24px;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 800;
      letter-spacing: 0.5px;
      font-size: 1.6rem;
      color: var(--text);
      position: relative;
      transition: var(--transition);
    }

    .brand:hover {
      color: var(--primary);
    }

    .tag {
      font-size: 0.85rem;
      font-weight: 600;
      background: var(--gradient-secondary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      padding: 6px 12px;
      border-radius: 20px;
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow-sm);
    }

    .searchbar {
      display: flex;
      gap: 12px;
      align-items: center;
      width: 100%;
      max-width: 500px;
      position: relative;
    }

    .searchbar input {
      width: 100%;
      padding: 14px 20px 14px 45px;
      border-radius: var(--radius);
      border: 1px solid var(--card-border);
      background: var(--glass);
      color: var(--text);
      outline: none;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      font-size: 0.95rem;
      box-shadow: var(--shadow-sm);
    }

    .searchbar input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2);
    }

    .searchbar i {
      position: absolute;
      left: 18px;
      color: var(--text-muted);
      font-size: 1rem;
      transition: var(--transition);
    }

    .searchbar input:focus + i {
      color: var(--primary);
    }

    .hero {
      text-align: center;
      padding: 80px 40px;
      margin: 40px 0;
      border-radius: var(--radius);
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      backdrop-filter: blur(15px);
      box-shadow: var(--shadow-xl);
      position: relative;
      overflow: hidden;
      animation: fadeIn 1s ease-out;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(14, 165, 233, 0.15) 10%, transparent 40%);
      animation: rotateGradient 20s linear infinite;
      z-index: -1;
    }

    @keyframes rotateGradient {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .hero h1 {
      font-size: 3.2rem;
      margin-bottom: 16px;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: 800;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
    }

    .hero p {
      color: var(--text-muted);
      font-size: 1.2rem;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.8;
    }

    .slideshow-container {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: 0;
      backdrop-filter: blur(16px);
      transition: var(--transition);
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
      font-size: 0.95rem;
      max-height: 300px;
      margin-bottom: 24px;
    }

    .slideshow-image {
      width: 100%;
      height: auto;
      display: none;
      transition: opacity 0.5s ease-in-out;
      cursor: pointer;
    }

    .slideshow-image.active {
      display: block;
      opacity: 1;
    }

    .today-classes-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 24px 0;
      background: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow-lg);
      font-size: 0.9rem;
      border: 1px solid var(--card-border);
    }

    .today-classes-table th {
      background: var(--gradient-primary);
      color: white;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 1rem;
    }

    .today-classes-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--card-border);
      transition: var(--transition);
    }

    .today-classes-table tr:last-child td {
      border-bottom: none;
    }

    .today-classes-table tr:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .subject-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      background: var(--primary);
      color: white;
      font-size: 0.8rem;
      font-weight: 500;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }

    .subject-badge:hover {
      background: var(--primary-dark);
    }

    .class-info {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .grid {
      display: grid;
      gap: 28px;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      margin-top: 32px;
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: 24px;
      backdrop-filter: blur(16px);
      transition: var(--transition);
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
      font-size: 0.95rem;
    }

    .card.highlight {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.3), var(--shadow-xl);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: var(--gradient-primary);
      opacity: 0.95;
    }

    .card:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
      box-shadow: var(--shadow-lg);
    }

    .subject {
      font-weight: 700;
      margin-bottom: 12px;
      color: #7dd3fc;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .time {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      border-radius: 12px;
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      transition: var(--transition);
      cursor: pointer;
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
      font-size: 0.9rem;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn.disabled {
      background: var(--text-muted);
      cursor: not-allowed;
      box-shadow: none;
      opacity: 0.7;
    }

    .btn.disabled:hover {
      transform: none;
      box-shadow: none;
    }

    .subj-list {
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      margin-top: 32px;
    }

    .pill {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      transition: var(--transition);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow-md);
      position: relative;
      overflow: hidden;
      font-size: 0.95rem;
    }

    .pill::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 6px;
      height: 100%;
      background: var(--gradient-primary);
      opacity: 0;
      transition: var(--transition);
    }

    .pill:hover::before {
      opacity: 1;
    }

    .pill:hover {
      transform: translateY(-3px);
      border-color: var(--primary);
      box-shadow: var(--shadow-lg);
    }

    .pill .go {
      padding: 8px 16px;
      border-radius: 10px;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      transition: var(--transition);
      font-size: 0.85rem;
    }

    .pill:hover .go {
      transform: translateX(3px);
      box-shadow: var(--shadow-sm);
    }

    .owner-wrap {
      max-width: 980px;
      margin: 32px auto 16px;
      padding: 24px;
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.03));
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      flex-direction: column;
      gap: 16px;
      align-items: center;
      text-align: center;
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow-lg);
    }

    .owner-messages {
      display: none;
    }

    .owner-intro {
      font-size: 1rem;
      color: var(--text-muted);
      max-width: 600px;
      line-height: 1.8;
      margin-bottom: 12px;
    }

    .owner-sub2 {
      font-size: 0.85rem;
      color: rgba(226,232,240,0.8);
      margin-top: 0;
      margin-bottom: 8px;
      text-transform: lowercase;
    }

    .owner-name {
      font-size: 1.4rem;
      font-weight: 800;
      margin-top: 8px;
      margin-bottom: 4px;
      background: linear-gradient(90deg, #a855f7, #ec4899, #22c55e);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-transform: none;
      letter-spacing: 0.5px;
    }

    .owner-sub {
      font-size: 0.85rem;
      color: rgba(226,232,240,0.8);
      margin-top: 0;
      margin-bottom: 8px;
      text-transform: lowercase;
    }

    .designer-credit {
      display: flex;
      gap: 8px;
      align-items: center;
      font-size: 0.8rem;
      color: var(--text);
      text-transform: none;
      font-weight: 600;
    }

    .designer-name {
      font-weight: 900;
      letter-spacing: 1px;
      text-transform: uppercase;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 0.9rem;
      position: relative;
      padding: 4px 10px;
      border-radius: 8px;
      box-shadow: var(--shadow-sm);
    }

    .site-footer {
      max-width: 980px;
      margin: 16px auto 64px;
      padding: 20px 24px;
      border-radius: 12px;
      background: rgba(15,23,42,0.75);
      border: 1px solid rgba(255,255,255,0.08);
      color: rgba(226,232,240,0.85);
      text-align: center;
      font-size: 0.85rem;
      box-shadow: var(--shadow-md);
    }

    @media (max-width: 768px) {
      .owner-name { font-size: 1.2rem; }
      .owner-messages { font-size: 0.75rem; gap: 8px; }
      .designer-credit { font-size: 0.75rem; }
      .owner-intro { font-size: 0.9rem; }

      .today-classes-table {
        font-size: 0.8rem;
      }

      .today-classes-table th,
      .today-classes-table td {
        padding: 8px 12px;
      }
    }

    .controls {
      display: flex;
      gap: 16px;
      align-items: center;
      margin-top: 24px;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 24px;
      padding: 12px 20px;
      background: var(--card-bg);
      border-radius: 12px;
      transition: var(--transition);
      border: 1px solid var(--card-border);
      backdrop-filter: blur(12px);
      font-size: 0.95rem;
      box-shadow: var(--shadow-sm);
    }

    .back-button:hover {
      background: rgba(14, 165, 233, 0.2);
      transform: translateX(-3px);
      border-color: var(--primary);
      box-shadow: var(--shadow-md);
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 48px;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--card-border);
      position: relative;
    }

    .section-title::before {
      content: "";
      display: block;
      width: 6px;
      height: 32px;
      background: var(--gradient-primary);
      border-radius: 6px;
    }

    .section-title h2 {
      font-size: 1.8rem;
      font-weight: 700;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
    }

    .empty-state {
      text-align: center;
      padding: 48px 24px;
      color: var(--text-muted);
      grid-column: 1 / -1;
      font-size: 1rem;
    }

    .empty-state svg {
      width: 80px;
      height: 80px;
      margin-bottom: 16px;
      opacity: 0.7;
    }

    .loading {
      display: inline-block;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255, 255, 255, 0.35);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .notification {
      position: fixed;
      bottom: 40px;
      right: 40px;
      padding: 16px 24px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 12px;
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.4s, transform 0.4s;
      backdrop-filter: blur(15px);
      display: flex;
      align-items: center;
      gap: 12px;
      max-width: 400px;
      font-size: 0.95rem;
    }

    .notification.show {
      opacity: 1;
      transform: translateY(0);
    }

    .notification.error {
      border-left: 5px solid var(--danger);
    }

    .notification.success {
      border-left: 5px solid var(--secondary);
    }

    .notification.warning {
      border-left: 5px solid var(--warning);
    }

    .card .video-title {
      font-size: 1rem;
      color: var(--text-muted);
      margin-bottom: 16px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.6;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.8s ease forwards;
    }

    @media (max-width: 968px) {
      .grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }

      .hero h1 {
        font-size: 2.8rem;
      }

      .hero p {
        font-size: 1.1rem;
      }

      .today-classes-table {
        font-size: 0.85rem;
      }
    }

    @media (max-width: 768px) {
      .nav {
        flex-direction: column;
        gap: 16px;
      }

      .searchbar {
        max-width: 100%;
      }

      .grid {
        grid-template-columns: 1fr;
      }

      .subj-list {
        grid-template-columns: 1fr;
      }

      .section-title {
        margin-top: 32px;
      }

      .stats {
        grid-template-columns: 1fr;
      }

      .hero {
        padding: 40px 20px;
      }

      .hero h1 {
        font-size: 2rem;
      }

      .today-classes-table {
        display: block;
        overflow-x: auto;
      }

      .pill {
        padding: 14px 20px;
      }
    }

    .glow-effect {
      position: relative;
    }

    .glow-effect::after {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      z-index: -1;
      border-radius: inherit;
      background: var(--gradient-primary);
      background-size: 600% 600%;
      animation: gradientGlow 8s ease infinite;
      filter: blur(18px);
      opacity: 0.45;
    }

    @keyframes gradientGlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    #subject-page .container {
      padding-top: 32px;
    }

    #subject-title {
      font-size: 2rem;
      margin-bottom: 12px;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .filter-bar {
      display: flex;
      gap: 16px;
      margin-bottom: 24px;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .filter-bar select {
      padding: 10px 16px;
      border-radius: 10px;
      border: 1px solid var(--card-border);
      background: var(--glass);
      color: var(--text);
      outline: none;
      transition: var(--transition);
      backdrop-filter: blur(12px);
      min-width: 150px;
      font-size: 0.85rem;
      box-shadow: var(--shadow-sm);
    }

    .filter-bar input {
      padding: 14px 20px;
      border-radius: 12px;
      border: 1px solid var(--card-border);
      background: var(--glass);
      color: var(--text);
      outline: none;
      transition: var(--transition);
      backdrop-filter: blur(12px);
      min-width: 200px;
      font-size: 0.95rem;
      box-shadow: var(--shadow-sm);
    }

    .filter-bar input:focus, .filter-bar select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2);
    }

    .class-serial {
      position: absolute;
      top: 16px;
      right: 16px;
      font-size: 0.85rem;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 20px;
      background: var(--gradient-primary);
      color: white;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }

    .class-serial:hover {
      transform: scale(1.05);
      box-shadow: var(--shadow-md);
    }

    #login-page {
      background: var(--darker);
      color: var(--text);
      font-family: var(--font-primary);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .login-container {
      width: 100%;
      max-width: 480px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: 40px;
      backdrop-filter: blur(16px);
      box-shadow: var(--shadow-xl);
      position: relative;
      overflow: hidden;
    }

    .login-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: var(--gradient-primary);
      z-index: 1;
    }

    .welcome-message {
      text-align: center;
      margin-bottom: 32px;
    }

    .welcome-message h1 {
      font-size: 2rem;
      margin-bottom: 12px;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: 800;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
    }

    .welcome-message p {
      color: var(--text-muted);
      font-size: 1.1rem;
    }

    .login-form {
      margin-bottom: 32px;
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--text);
    }

    .form-group input {
      width: 100%;
      padding: 16px 20px;
      border-radius: 12px;
      border: 1px solid var(--card-border);
      background: var(--glass);
      color: var(--text);
      outline: none;
      transition: var(--transition);
      font-size: 1rem;
      box-shadow: var(--shadow-sm);
    }

    .form-group input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2);
    }

    .login-btn {
      width: 100%;
      padding: 16px;
      border-radius: 12px;
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-md);
    }

    .login-btn:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .support-info {
      text-align: center;
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--card-border);
    }

    .support-info p {
      color: var(--text-muted);
      margin-bottom: 16px;
      font-size: 0.95rem;
    }

    .whatsapp-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: #25D366;
      color: white;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
      box-shadow: var(--shadow-md);
    }

    .whatsapp-link:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .error-message {
      color: var(--danger);
      text-align: center;
      margin-top: 16px;
      font-size: 0.95rem;
      display: none;
    }

    .warning-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.4s, visibility 0.4s;
    }

    .warning-modal.show {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      padding: 40px;
      max-width: 560px;
      width: 90%;
      backdrop-filter: blur(20px);
      box-shadow: var(--shadow-xl);
    }

    .modal-header {
      text-align: center;
      margin-bottom: 24px;
    }

    .modal-header h2 {
      font-size: 1.6rem;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 12px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
    }

    .modal-body {
      margin-bottom: 32px;
    }

    .modal-body p {
      color: var(--text-muted);
      line-height: 1.7;
      margin-bottom: 16px;
    }

    .modal-footer {
      text-align: center;
    }

    .modal-ok-btn {
      padding: 14px 40px;
      border-radius: 12px;
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-md);
    }

    .modal-ok-btn:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    @media (max-width: 480px) {
      .login-container {
        padding: 24px;
      }

      .welcome-message h1 {
        font-size: 1.6rem;
      }

      .modal-content {
        padding: 24px;
      }
    }

    #refresh-data-btn {
      margin-left: auto;
    }

    /* Additional styles for your specific components */
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .form-button, .submissions-button, .comment-button, .reply-button, .admin-button {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 8px;
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      font-size: 0.85rem;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
      position: relative;
      overflow: hidden;
    }

    .form-button:hover, .submissions-button:hover, .comment-button:hover, .reply-button:hover, .admin-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 25px;
      max-width: 600px;
      width: 90%;
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow-y: auto;
      max-height: 90vh;
      scroll-behavior: smooth;
    }

    .modal-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
    }

    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.5rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .modal-close:hover {
      color: var(--danger);
    }

    .modal-intro {
      margin-bottom: 20px;
      text-align: center;
    }

    .modal-intro h2 {
      font-size: 1.4rem;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 10px;
    }

    .modal-intro p {
      color: var(--text-muted);
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .form-section {
      display: flex;
      flex-direction: column;
      gap: 25px;
    }

    .form-section label {
      font-weight: bold;
      font-size: 0.95rem;
      color: var(--text);
      text-align: left;
    }

    .form-section input, .form-section select, .form-section textarea {
      padding: 12px 16px;
      border-radius: 10px;
      border: 1px solid var(--card-border);
      background: var(--glass);
      color: var(--text);
      outline: none;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      font-size: 0.9rem;
    }

    .form-section input:focus, .form-section select:focus, .form-section textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
    }

    .form-section textarea {
      resize: vertical;
      min-height: 120px;
    }

    .submit-button {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 10px rgba(14, 165, 233, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .submit-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(14, 165, 233, 0.4);
    }

    .submit-button.loading .spinner {
      display: inline-block;
    }

    .submit-button.loading {
      animation: none !important;
    }

    .spinner {
      display: none;
      width: 16px;
      height: 16px;
      border: 2px solid white;
      border-top: 2px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    .success-message {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--secondary);
      color: white;
      padding: 20px 40px;
      border-radius: 10px;
      z-index: 2000;
      font-size: 1rem;
      box-shadow: var(--shadow-md);
      text-align: center;
      max-width: 80%;
    }

    .submissions-list, .reply-list, .sub-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      max-height: 60vh;
      overflow-y: auto;
      scroll-behavior: smooth;
    }

    .submission-item {
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      padding: 15px;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }

    .submission-item:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .submission-name {
      font-weight: 600;
      font-size: 1rem;
      color: var(--primary);
    }

    .submission-batch {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .submission-message {
      margin-top: 10px;
      font-size: 0.9rem;
    }

    .submission-reply {
      margin-top: 10px;
      font-size: 0.9rem;
      border-top: 1px solid var(--card-border);
      padding-top: 10px;
      color: var(--secondary);
    }

    .submission-time {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 5px;
      text-align: right;
    }

    .reply-btn {
      padding: 8px 16px;
      border-radius: 8px;
      background: var(--gradient-secondary);
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 10px;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
    }

    .reply-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .warning-message {
      background: var(--warning);
      color: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
      font-size: 0.9rem;
    }

    .notice-bar {
      overflow: hidden;
      white-space: nowrap;
      background: rgba(14, 165, 233, 0.1);
      color: var(--warning);
      font-size: 0.8rem;
      padding: 6px 0;
      text-align: center;
      border-bottom: 1px solid var(--card-border);
      margin-top: 0;
      position: relative;
    }

    .notice-bar span {
      display: inline-block;
      animation: marquee 40s linear infinite 0s;
      padding-left: 100%;
    }

    @keyframes marquee {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    /* Notice bar color classes */
    .notice-color1 { color: #FF5733; }
    .notice-color2 { color: #FFC300; }
    .notice-color3 { color: #DAF7A6; }
    .notice-color4 { color: #33FFBD; }
    .notice-color5 { color: #339CFF; }
    .notice-color6 { color: #A833FF; }
    .notice-color7 { color: #FF33A8; }

    .clock-container {
      text-align: center;
      margin: 20px auto;
      padding: 25px 20px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      box-shadow: var(--shadow-md);
      backdrop-filter: blur(10px);
      max-width: 300px;
      width: 100%;
    }

    .clock-time {
      font-size: 1.8rem;
      font-weight: 700;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 5px;
    }

    .clock-time small {
      font-size: 0.5em;
      vertical-align: middle;
    }

    .clock-date {
      font-size: 0.9rem;
      color: var(--text-muted);
      font-weight: 500;
    }

    #exam-countdown {
      font-size: 0.9rem;
      color: var(--text-muted);
      font-weight: 500;
    }

    .clock-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-secondary);
    }

    #search-results {
      margin: 10px 0;
      display: flex;
      flex-direction: column;
      gap: 5px;
      max-height: 300px;
      overflow-y: auto;
      background: var(--card-bg);
      border-radius: 12px;
      padding: 10px;
      box-shadow: var(--shadow-sm);
      display: none;
    }

    .search-result-item {
      padding: 8px 12px;
      background: var(--glass);
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.9rem;
      color: var(--text);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .search-result-item:hover {
      background: rgba(14, 165, 233, 0.1);
      transform: translateY(-2px);
    }

    .search-result-item .title {
      flex: 1;
    }

    .search-result-item .subject {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* Dashboard Styles */
    .dashboard-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
    }

    .dashboard-modal.show {
      opacity: 1;
      visibility: visible;
    }

    .stats-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin-top: 15px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow-md);
      background: var(--card-bg);
    }

    .stats-table th,
    .stats-table td {
      padding: 12px 16px;
      text-align: center;
      border-bottom: 1px solid var(--card-border);
      font-size: 0.9rem;
    }

    .stats-table th {
      background: var(--gradient-primary);
      color: white;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stats-table tr:last-child td {
      border-bottom: none;
    }

    .stats-table tr:hover {
      background: rgba(255, 255, 255, 0.05);
      cursor: pointer;
    }

    .stats-table .total {
      color: #0ea5e9;
      font-weight: 600;
    }

    .stats-table .done {
      color: #22c55e;
      font-weight: 600;
    }

    .stats-table .pending {
      color: #ef4444;
      font-weight: 600;
    }

    .stats h2 {
      font-size: 1.3rem;
      margin-bottom: 10px;
      background: var(--gradient-secondary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* Loading Overlay Styles */
    #loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--darker);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 1;
      visibility: visible;
      transition: opacity 0s, visibility 0s;
    }

    #loading-overlay.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .loading-box {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 40px;
      text-align: center;
      max-width: 500px;
      width: 90%;
      backdrop-filter: blur(15px);
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
    }

    .loading-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-primary);
    }

    .loading-title {
      font-size: 1.5rem;
      margin-bottom: 20px;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: 700;
    }

    .loading-message {
      color: var(--text-muted);
      margin-bottom: 25px;
      font-size: 1rem;
      line-height: 1.6;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 5px solid transparent;
      border-radius: 50%;
      border-top: 5px solid var(--primary);
      border-right: 5px solid var(--secondary);
      border-bottom: 5px solid var(--accent);
      border-left: 5px solid var(--warning);
      margin: 0 auto 20px;
      animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
    }

    .loading-progress {
      width: 100%;
      height: 8px;
      background: var(--glass);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 20px;
    }

    .loading-progress-bar {
      height: 100%;
      background: var(--gradient-primary);
      width: 0%;
      transition: width 0.5s ease;
    }

    .loading-dots {
      display: inline-block;
      margin-left: 5px;
    }

    .loading-dots::after {
      content: '';
      animation: dots 1.5s steps(4, end) infinite;
    }

    @keyframes dots {
      0%, 20% { content: ''; }
      40% { content: '.'; }
      60% { content: '..'; }
      80%, 100% { content: '...'; }
    }

    .card-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--gradient-primary);
      color: white;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 3px 8px;
      border-radius: 15px;
      box-shadow: 0 3px 8px rgba(14, 165, 233, 0.3);
    }

    .exam-expiry-notice {
      color: var(--warning);
      font-size: 0.8rem;
      margin-top: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .alert-box {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--danger);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      color: var(--text);
      position: relative;
    }

    .alert-box.warning {
      background: rgba(234, 179, 8, 0.1);
      border-color: var(--warning);
    }

    .alert-box i {
      margin-right: 10px;
    }

    .name-input-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 20px;
    }

    .name-input-form input {
      padding: 14px;
      border-radius: 10px;
      border: 1px solid var(--card-border);
      background: var(--glass);
      color: var(--text);
      outline: none;
      font-size: 1rem;
    }

    .name-input-form button {
      padding: 14px;
      border-radius: 10px;
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    .progress-bar {
      height: 10px;
      background: var(--text-muted);
      border-radius: 5px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-bar-fill {
      height: 100%;
      background: var(--gradient-primary);
      transition: width 0.5s ease;
    }

    .badge-current {
      display: inline-block;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      margin-left: 10px;
      font-weight: 600;
    }

    .badge-starter {
      background: #6b7280;
      color: white;
    }

    .badge-bronze {
      background: #cd7f32;
      color: white;
    }

    .badge-silver {
      background: #c0c0c0;
      color: white;
    }

    .badge-gold {
      background: #ffd700;
      color: black;
    }

    .badge-platinum {
      background: #e5e4e2;
      color: black;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-muted);
    }

    .close-btn:hover {
      color: var(--text);
    }

    .notes-section textarea {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid var(--card-border);
      background: var(--glass);
      color: var(--text);
      outline: none;
      resize: vertical;
      min-height: 80px;
    }

    .notes-section button {
      margin-top: 10px;
      padding: 10px 20px;
      border-radius: 10px;
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    .notes-section ul {
      list-style: none;
      margin-top: 15px;
    }

    .notes-section li {
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .notes-section li button {
      background: var(--danger);
      padding: 5px 10px;
      font-size: 0.8rem;
    }

    #sort-classes {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background: var(--glass);
      border: 1px solid var(--card-border);
      border-radius: 10px;
      padding: 8px 30px 8px 12px;
      font-size: 0.85rem;
      color: var(--text);
      position: relative;
      min-width: 150px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%23e2e8f0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 14px;
      transition: var(--transition);
    }

    #sort-classes:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
    }

    @media (max-width: 768px) {
      .action-buttons {
        flex-direction: column;
        gap: 10px;
      }
      
      .form-button, .submissions-button, .comment-button, .reply-button, .admin-button {
        width: 100%;
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .modal-intro h2 {
        font-size: 1.2rem;
      }
      
      .form-section label, .form-section input, .form-section select, .form-section textarea, .submit-button {
        font-size: 0.85rem;
      }
      
      .submission-item {
        padding: 12px;
      }
      
      .submission-name, .submission-message {
        font-size: 0.85rem;
      }
      
      .submission-batch, .submission-time {
        font-size: 0.75rem;
      }
    }
  </style>
</head>
<body>
  <!-- Default Page -->
  <div id="default-page">
    <header>
      <div class="logo">
        <h3>BOM</h3>
      </div>
    </header>

    <h1>  </h1>
    <h2>     </h2>

    <div class="teacher-banner">
      <img src="https://i.imgur.com/CR18xz1.jpeg" alt="">
    </div>

    <button class="main-btn" id="go-to-main-btn">  </button>

    <!-- MOTIVATION AREA -->
    <div class="motivation-box">
      <p id="motivationText">      </p>
    </div>

    <!-- COURSES -->
    <div class="courses">
      <div class="course-box">
        <div class="course-img">
          <img src="https://i.imgur.com/FCv9CTv.jpeg" alt="">
        </div>
        <p class="details-btn" data-course="1"></p>
      </div>

      <div class="course-box">
        <div class="course-img">
          <img src="https://i.imgur.com/6N1mH9F.jpeg" alt="">
        </div>
        <p class="details-btn" data-course="2"></p>
      </div>

      <div class="course-box">
        <div class="course-img">
          <img src="https://i.imgur.com/6VP1eFp.jpeg" alt="">
        </div>
        <p class="details-btn" data-course="3"></p>
      </div>

      <div class="course-box">
        <div class="course-img">
          <img src="https://i.imgur.com/m48Qi4s.png" alt="">
        </div>
        <p class="details-btn" data-course="4"></p>
      </div>
    </div>

    <!-- TEACHER BOX -->
    <div class="teacher-box" aria-label="Teachers">
      <!-- Riab Hasan -->
      <div class="single-teacher" role="article" aria-label="Riab Hasan">
        <img src="https://i.imgur.com/Dl21S5x.jpeg" alt="Riab Hasan">
        <div class="t-name">Riad Hasan</div>
        <div class="t-position">CEO &amp; Founder</div>
        <div class="t-exp">Experience: 6 Years</div>
        <div class="t-summary">
          Riad Hasan is the visionary founder and CEO of Bangladesh Online Madrasa. He studied at the International Islamic University Chittagong (IIUC) and focuses on integrating technology with education to create accessible learning platforms.
        </div>
      </div>

      <!-- Arabic Language Teacher -->
      <div class="single-teacher" role="article" aria-label="Arabic Language Teacher">
        <img src="https://i.imgur.com/xbCkScP.jpeg" alt="Arabic Language Teacher">
        <div class="t-name">Md. Osman Goni</div>
        <div class="t-position">Lecturer in Arabic</div>
        <div class="t-exp">Experience: 15 Years</div>
        <div class="t-summary">
          A skilled Arabic language instructor with academic training from the Islamic University, Kushtia. Uses clear explanation and structured lessons to build students' understanding of Arabic and Islamic studies.
        </div>
      </div>

      <!-- Dh Shipon -->
      <div class="single-teacher" role="article" aria-label="Dh Shipon">
        <img src="https://i.imgur.com/TbM78cK.jpeg" alt="Dh Shipon">
        <div class="t-name">Dh Shipon</div>
        <div class="t-position">Lecturer, Department of English</div>
        <div class="t-exp">Experience: 13 Years</div>
        <div class="t-summary">
          Dh Shipon is a dedicated English educator with B.A. (Honours) and M.A. (First Class) from the University of Chittagong. He focuses on literature and effective, engaging teaching methods.
        </div>
      </div>
    </div>

    <!-- FOOTER -->
    <footer>
      <h3>Md Riad Hasan</h3>
      <p>CEO & Founder</p>

      <br>

      <p> : Level-4, 34, Banani, Dhaka</p>
      <p> : 01XXXXXXXXX</p>
      <p> : YOUR_SUPPORT_EMAIL</p>

      <div class="social-icons">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png">
        <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png">
      </div>

      <p style="opacity:0.7; margin-top:20px;">    2025  All Rights Reserved</p>
    </footer>

    <!-- MODAL -->
    <div id="courseModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <img id="modalImage" class="modal-img" src="" alt="">
        <div id="modalDetails" class="modal-details"></div>
      </div>
    </div>
  </div>

  <!-- ALIM-26 Website -->
  <!-- Loading Overlay -->
  <div id="loading-overlay" class="hidden">
    <div class="loading-box">
      <div class="loading-spinner"></div>
      <h2 class="loading-title bangla-font">  <span class="loading-dots"></span></h2>
      <p class="loading-message bangla-font">       </p>
      <div class="loading-progress">
        <div class="loading-progress-bar" id="loading-progress-bar"></div>
      </div>
    </div>
  </div>

  <div id="login-page" style="display: none;">
    <div class="login-container">
      <div class="welcome-message">
        <h1 class="bangla-font">ALIM-26 "Final Premium Batch (Target GPA-5)"</h1>
        <p class="bangla-font">        (BOM)    -     </p>
      </div>
      <div class="login-form">
        <div class="form-group">
          <label for="password" class="bangla-font">  </label>
          <input type="password" id="password" placeholder="  " class="bangla-font">
        </div>
        <button class="login-btn bangla-font" onclick="checkPassword()"> </button>
        <div id="error-message" class="error-message bangla-font">      </div>
      </div>
      <div class="support-info">
        <p class="bangla-font">   BOM     </p>
        <a href="https://wa.me/8801806234120" class="whatsapp-link" target="_blank">
          <i class="fab fa-whatsapp"></i>
          <span>WhatsApp</span>
        </a>
      </div>
    </div>
  </div>

  <div id="main-page" style="display: none;">
    <header>
      <nav class="nav container">
        <div class="brand">
          <i class="fas fa-graduation-cap"></i>
          <span>ALIM-26 <br>
            <span class="tag">"Final Premium Batch (Target GPA-5)" (BOM)</span></span>
        </div>
        <div class="searchbar">
          <i class="fas fa-search"></i>
          <input id="search-subjects" type="search" placeholder="   " class="dynamic-placeholder">
        </div>
        <div id="search-results"></div>
        <div class="controls">
          <button class="btn" id="refresh-data-btn"><i class="fas fa-sync-alt"></i> <span class="bangla-font"> </span></button>
          <button class="btn" id="dashboard-btn" style="display: none;"><i class="fas fa-tachometer-alt"></i> <span class="bangla-font"></span></button>
          <a class="btn" id="add-class-btn" href="https://docs.google.com/forms/d/e/1FAIpQLScxUYNsEFpE3YA9DBA7GtDadTJ3TXJd9-xgKesRlOrVrjvj1w/viewform?usp=header" target="_blank" rel="noopener" style="display: none;"><i class="fas fa-plus-circle"></i> <span class="bangla-font">  </span></a>
        </div>
      </nav>
    </header>
    <div class="notice-bar bangla-font"><span><b> :  ,                            !</b></span></div>
    <main class="container">
      <div class="hero fade-in">
        <h1 class="bangla-font">ALIM-26 "Final Premium Batch (Target GPA-5)"</h1>
        <p class="bangla-font">        (BOM)    -     </p>
      </div>
      <!-- New Slideshow Box -->
      <div class="slideshow-container fade-in">
        <img class="slideshow-image" src="https://example.com.image1.jpg" alt="Image 1">
        <img class="slideshow-image" src="https://example.com/image2.jpg" alt="Image 2">
        <img class="slideshow-image" src="https://example.com/image3.jpg" alt="Image 3">
        <img class="slideshow-image" src="https://example.com/image4.jpg" alt="Image 4">
      </div>
      <!-- Attractive Clock with Date -->
      <div class="clock-container fade-in stat-card">
        <div id="clock-time" class="clock-time"></div>
        <div id="clock-date" class="clock-date"></div>
        <div id="exam-countdown" class="stat-label bangla-font"></div>
      </div>
      <div class="section-title">
        <h2 class="bangla-font"> </h2>
        <select id="sort-classes" class="bangla-font">
          <option value="today" selected> </option>
          <option value="week"> </option>
          <option value="month"> </option>
        </select>
      </div>
      <div id="today-classes">
        <table class="today-classes-table">
          <thead>
            <tr>
              <th class="bangla-font"></th>
              <th class="bangla-font"></th>
              <th class="bangla-font"></th>
            </tr>
          </thead>
          <tbody id="today-classes-body">
            <tr>
              <td colspan="3" class="bangla-font" style="text-align: center; padding: 20px;">
                <div class="loading"></div>  ...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="section-title">
        <h2 class="bangla-font"> </h2>
      </div>
      <div class="subj-list">
        <a class="pill subject-link" href="#" data-name=" "><span><i class="fas fa-book-quran"></i> <span class="bangla-font"> </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="   "><span><i class="fas fa-book"></i> <span class="bangla-font">   </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="   "><span><i class="fas fa-balance-scale"></i> <span class="bangla-font">   </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="   "><span><i class="fas fa-balance-scale"></i> <span class="bangla-font">   </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-language"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-language"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name=" "><span><i class="fas fa-book-open"></i> <span class="bangla-font"> </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-brain"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-font"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-font"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-font"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-font"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name=" "><span><i class="fas fa-landmark"></i> <span class="bangla-font"> </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="   "><span><i class="fas fa-laptop-code"></i> <span class="bangla-font">   </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-atom"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-atom"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-flask"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-flask"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-dna"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-dna"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-chart-line"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-chart-line"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="    "><span><i class="fas fa-landmark"></i> <span class="bangla-font">    </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="    "><span><i class="fas fa-landmark"></i> <span class="bangla-font">    </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="   "><span><i class="fas fa-calculator"></i> <span class="bangla-font">   </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="   "><span><i class="fas fa-calculator"></i> <span class="bangla-font">   </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name=""><span><i class="fas fa-bullseye"></i> <span class="bangla-font"></span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name=""><span><i class="fas fa-file-alt"></i> <span class="bangla-font"></span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-file-pdf"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name="  "><span><i class="fas fa-chart-bar"></i> <span class="bangla-font">  </span></span><span class="go bangla-font"></span></a>
        <a class="pill subject-link" href="#" data-name=""><span><i class="fas fa-lightbulb"></i> <span class="bangla-font"></span></span><span class="go bangla-font"></span></a>
      </div>
    </main>
    <div class="container">
      <div class="action-buttons">
        <button class="form-button" id="form-button"><i class="fas fa-comment"></i> <span class="bangla-font"> </span></button>
        <button class="submissions-button" id="submissions-button"><i class="fas fa-list"></i> <span class="bangla-font"> </span></button>
      </div>
    </div>
    <div class="owner-wrap">
      <div class="owner-sub2">   (BOM)     ,      </div>
      <div class="owner-name bangla-font">MD. RIAD HASAN<span style="font-weight:600; font-size:0.86rem; color:rgba(226,232,240,0.85); margin-left:8px;">(CEO & Founder)</span></div>
      <div class="owner-sub">building brighter paths for ambitious learners</div>
      <div class="designer-credit">
        <span class="bangla-font" style="opacity:0.9;">design by</span>
        <span class="designer-name">SAHIBUL MUSA SIUM</span>
      </div>
    </div>
    <footer class="site-footer">
       2025 ALIM-26 "Final Premium Batch (Target GPA-5)" (BOM). All rights reserved.
    </footer>
  </div>

  <div id="subject-page" style="display: none;">
    <header>
      <nav class="nav container">
        <button class="brand back-button"><i class="fas fa-arrow-left"></i> <span class="bangla-font"> </span></button>
        <div class="filter-bar">
          <input id="search" type="search" placeholder=" ...">
          <select id="sort">
            <option value="desc" class="bangla-font">  </option>
            <option value="asc" class="bangla-font">  </option>
          </select>
        </div>
      </nav>
    </header>
    <main class="container">
      <h2 id="subject-title" class="bangla-font"><i class="fas fa-book"></i> </h2>
      <div id="classGrid" class="grid"></div>
    </main>
    <div class="owner-wrap">
      <div class="owner-sub2">   (BOM)     ,      </div>
      <div class="owner-name bangla-font">MD. RIAD HASAN<span style="font-weight:600; font-size:0.86rem; color:rgba(226,232,240,0.85); margin-left:8px;">(CEO & Founder)</span></div>
      <div class="owner-sub">building brighter paths for ambitious learners</div>
      <div class="designer-credit">
        <span class="bangla-font" style="opacity:0.9;">design by</span>
        <span class="designer-name">SAHIBUL MUSA SIUM</span>
      </div>
    </div>
    <footer class="site-footer">
       2025 ALIM-26 "Final Premium Batch (Target GPA-5)" (BOM). All rights reserved.
    </footer>
  </div>

  <div id="warning-modal" class="warning-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="bangla-font">  !</h2>
      </div>
      <div class="modal-body">
        <p class="bangla-font">   : <br>BOM              </p>
        <p class="bangla-font">       ,         </p>
      </div>
      <div class="modal-footer">
        <button class="modal-ok-btn bangla-font" onclick="closeWarningModal()"> </button>
      </div>
    </div>
  </div>

  <div id="loading-modal" class="warning-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="bangla-font">  ...</h2>
      </div>
      <div class="modal-body">
        <p class="bangla-font">       </p>
        <div class="loading"></div>
      </div>
    </div>
  </div>

  <div id="notification" class="notification"></div>

  <!-- Dashboard Modal -->
  <div id="dashboard-modal" class="dashboard-modal">
    <div class="modal-content">
      <div class="modal-body" id="dashboard-body">
        <!--      -->
      </div>
    </div>
  </div>

  <!-- Name Set Modal -->
  <div class="modal" id="nameModal">
    <div class="modal-content">
      <button class="modal-close" onclick="hideNameModal()"></button>
      <div class="modal-intro">
        <h2 class="bangla-font">  </h2>
        <p class="bangla-font">               </p>
        <div class="warning-message bangla-font">
                ,                ,         
        </div>
      </div>
      <div class="form-section">
        <form id="nameForm" onsubmit="saveName(event)">
          <label class="bangla-font" for="userName"></label>
          <input type="text" id="userName" placeholder="   " required class="bangla-font">
          <button type="submit" class="submit-button bangla-font"> </button>
        </form>
      </div>
    </div>
  </div>

  <!-- Form Modal -->
  <div class="modal" id="formModal">
    <div class="modal-content">
      <button class="modal-close" onclick="hideForm()"></button>
      <div class="modal-intro">
        <h2 class="bangla-font">    </h2>
        <p class="bangla-font"> ,                  </p>
      </div>
      <div class="form-section">
        <form id="myForm" onsubmit="submitForm(event)">
          <label class="bangla-font" for="name"></label>
          <input type="text" name="name" id="name" placeholder=" " required class="bangla-font" readonly><br>
          <label class="bangla-font" for="batch"> </label>
          <select name="batch" id="batch" required class="bangla-font">
            <option value="" disabled selected class="bangla-font">  </option>
            <option value="ALIM-26" class="bangla-font">-</option>
          </select><br>
          <label class="bangla-font" for="message">//</label>
          <textarea name="message" id="message" placeholder="  " required class="bangla-font"></textarea>
          <button type="submit" class="submit-button bangla-font" id="submitBtn">  <span class="spinner"></span></button>
        </form>
      </div>
    </div>
  </div>

  <!-- Submissions Modal -->
  <div class="modal" id="submissionsModal">
    <div class="modal-content">
      <button class="modal-close" onclick="hideSubmissions()"></button>
      <div class="modal-intro">
        <h2 class="bangla-font"> </h2>
        <p class="bangla-font">   </p>
      </div>
      <div id="submissions-list" class="submissions-list"></div>
    </div>
  </div>

  <div class="success-message" id="successMessage">   !</div>
  <div id="notification" class="notification"></div>

  <script>
    // Default Page Scripts
document.addEventListener('DOMContentLoaded', function() {
  // MOTIVATION TEXT ROTATION
  let motivationList = [
    "      ",
    "      ",
    "    ",
    "      ",
    "   ",
    "  ,     "
  ];

  let mIndex = 0;

  setInterval(() => {
    mIndex = (mIndex + 1) % motivationList.length;
    document.getElementById("motivationText").innerText = motivationList[mIndex];
  }, 5000);

  // Course Details Data (Demo)
  const courseDetails = {
    1: {
      img: "COURSE_IMAGE_1",
      details: "      , ,                 :   ,   ,           :     ,                   ,                                  ,           "
    },
    2: {
      img: "COURSE_IMAGE_2",
      details: "      , ,              :   ,   ,          :     ,                   ,                                  ,           "
    },
    3: {
      img: "COURSE_IMAGE_3",
      details: "     , ,                :   ,   ,          :     ,                   ,                                  ,           "
    },
    4: {
      img: "COURSE_IMAGE_4",
      details: "      , ,                 :   ,   ,          :     ,                   ,                                  ,           "
    }
  };

  // Modal Functionality
  const modal = document.getElementById("courseModal");
  const modalImg = document.getElementById("modalImage");
  const modalDetails = document.getElementById("modalDetails");
  const closeBtn = document.getElementsByClassName("close")[0];

  document.querySelectorAll(".details-btn").forEach(btn => {
    btn.addEventListener("click", function() {
      const courseId = this.getAttribute("data-course");
      const course = courseDetails[courseId];
      modalImg.src = course.img;
      modalDetails.innerHTML = course.details;
      modal.style.display = "block";
      document.body.style.overflow = "hidden";
    });
  });

  closeBtn.addEventListener("click", function() {
    modal.style.display = "none";
    document.body.style.overflow = "";
  });

  window.addEventListener("click", function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
      document.body.style.overflow = "";
    }
  });

  // Go to main page button - FIXED VERSION
  document.getElementById('go-to-main-btn').addEventListener('click', function() {
    document.getElementById('default-page').style.display = 'none';
    
    // Always start main page from top regardless of default page scroll
    window.scrollTo({ top: 0, behavior: 'instant' });
    
    if (checkLoginExpiry()) {
      document.getElementById('main-page').style.display = 'block';
      loadInitialData();
      showAddClassButton();
      showDashboardButton();
    } else {
      document.getElementById('login-page').style.display = 'flex';
    }
  });

  // Show default page initially
  document.getElementById('default-page').style.display = 'block';
});

    // ALIM-26 Website Scripts
    const API_URL = "https://script.google.com/macros/s/AKfycbxbkM3I0Zp_Bqr4XJcjNB6A82h-RYGXUYq7oiNkmhAuJzslOYJtPjhNmuIIwJXTaCzgnA/exec";

    function $(sel, root = document) { return root.querySelector(sel); }
    function $all(sel, root = document) { return Array.from(root.querySelectorAll(sel)); }

    let currentSubject = null;
    let highlightedClassTimestamp = null;
    const loginPage = $('#login-page');
    const mainPage = $('#main-page');
    const subjectPage = $('#subject-page');
    const warningModal = $('#warning-modal');
    const loadingModal = $('#loading-modal');
    const loadingOverlay = $('#loading-overlay');
    let allClasses = [];
    let groupedClassesCache = {};
    let mainScrollPosition = 0;

    const availableSubjects = [
      " ",
      "   ",
      "   ",
      "   ",
      "  ",
      "  ",
      " ",
      "  ",
      "  ",
      "  ",
      "  ",
      "  ",
      " ",
      "   ",
      "  ",
      "  ",
      "  ",
      "  ",
      "  ",
      "  ",
      "  ",
      "  ",
      "    ",
      "    ",
      "   ",
      "   ",
      "",
      "",
      "  ",
      "  ",
      "" // Changed from '' to ''
    ];

    const LOGIN_EXPIRY_KEY = 'alim26_login_expiry';
    const IS_LOGGED_IN_KEY = 'alim26_is_logged_in';
    const USER_ROLE_KEY = 'alim26_user_role';

    // Dashboard-specific storage keys
    const DASHBOARD_STORAGE_KEYS = {
      STUDENT_NAME: 'alim26_dashboard_student_name',
      JOIN_DATE: 'alim26_dashboard_join_date',
      LAST_LOGIN: 'alim26_dashboard_last_login',
      LAST_ACTIVITY: 'alim26_dashboard_last_activity',
      COMPLETED_ITEMS: 'alim26_dashboard_completed_items',
      NOTES: 'alim26_dashboard_notes'
    };

    // Slideshow variables
    let slideshowInterval;
    let isSlideshowPaused = false;

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function setLoginExpiry(role) {
      localStorage.setItem(IS_LOGGED_IN_KEY, 'true');
      localStorage.setItem(USER_ROLE_KEY, role);
    }

    function checkLoginExpiry() {
      const isLoggedIn = localStorage.getItem(IS_LOGGED_IN_KEY);
      return isLoggedIn === 'true';
    }

    function getUserRole() {
      return localStorage.getItem(USER_ROLE_KEY) || 'user';
    }

    function logout() {
      localStorage.removeItem(IS_LOGGED_IN_KEY);
      localStorage.removeItem(USER_ROLE_KEY);
      document.getElementById('default-page').style.display = 'block';
      loginPage.style.display = 'none';
      mainPage.style.display = 'none';
      subjectPage.style.display = 'none';
    }

    function showWarningModal() {
      warningModal.classList.add('show');
    }

    function closeWarningModal() {
      warningModal.classList.remove('show');
    }

    function showLoadingOverlay() {
      loadingOverlay.classList.remove('hidden');
    }

    function hideLoadingOverlay() {
      loadingOverlay.classList.add('hidden');
    }

    function updateLoadingProgress(progress) {
      const progressBar = $('#loading-progress-bar');
      if (progressBar) {
        progressBar.style.width = `${progress}%`;
      }
    }

    function showLoadingModal() {
      loadingModal.style.display = 'flex';
    }

    function hideLoadingModal() {
      loadingModal.style.display = 'none';
    }

    function showNotification(message, isError = false, isWarning = false) {
      const notification = $('#notification');
      notification.innerHTML = "<i class=\"" + (isError ? 'fas fa-exclamation-circle' : isWarning ? 'fas fa-exclamation-triangle' : 'fas fa-check-circle') + "\"></i> " + message;
      notification.className = 'notification ' + (isError ? 'error' : isWarning ? 'warning' : 'success');
      notification.classList.add('show');

      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    function checkPassword() {
      const password = $('#password').value.trim();
      const errorElement = $('#error-message');
      
      if (password === 'USERALIM26') {
        setLoginExpiry('user');
        loginPage.style.display = 'none';
        mainPage.style.display = 'block';
        showWarningModal();
        showLoadingOverlay();
        loadInitialData();
        showDashboardButton();
        scrollToTop();
      } else if (password === 'OWNERALIM26') {
        setLoginExpiry('owner');
        loginPage.style.display = 'none';
        mainPage.style.display = 'block';
        showWarningModal();
        showLoadingOverlay();
        loadInitialData();
        scrollToTop();
      } else if (password === 'EDITOR@BOM-435') {
        setLoginExpiry('editor');
        loginPage.style.display = 'none';
        mainPage.style.display = 'block';
        showWarningModal();
        showLoadingOverlay();
        loadInitialData();
        scrollToTop();
      } else {
        errorElement.style.display = 'block';
        setTimeout(() => {
          errorElement.style.display = 'none';
        }, 3000);
      }
    }

    function showDashboardButton() {
      const dashboardBtn = $('#dashboard-btn');
      const role = getUserRole();
      if (role === 'user' || role === 'editor') {
        dashboardBtn.style.display = 'inline-flex';
      }
    }

    function showAddClassButton() {
      const addClassBtn = $('#add-class-btn');
      if (addClassBtn && (getUserRole() === 'owner' || getUserRole() === 'editor')) {
        addClassBtn.style.display = 'inline-flex';
      }
    }

    $('#password').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        checkPassword();
      }
    });

    function getDateFromTimestamp(timestamp) {
      if (!timestamp) return getTodayDate();

      try {
        const date = new Date(timestamp);
        if (!isNaN(date)) {
          const year = date.getFullYear();
          const month = String(date.getMonth() + 1).padStart(2, '0');
          const day = String(date.getDate()).padStart(2, '0');
          return `${day}-${month}-${year}`;
        }
        return getTodayDate();
      } catch (error) {
        console.error("Timestamp parsing error:", error, timestamp);
        return getTodayDate();
      }
    }

    function getTimeFromTimestamp(timestamp) {
      if (!timestamp) return '12:00 AM';

      try {
        const date = new Date(timestamp);
        if (!isNaN(date)) {
          return date.toLocaleTimeString('en-US', { 
            timeZone: 'Asia/Dhaka', 
            hour: 'numeric', 
            minute: '2-digit', 
            hour12: true 
          });
        }
        return '12:00 AM';
      } catch (error) {
        console.error("Time parsing error:", error, timestamp);
        return '12:00 AM';
      }
    }

    function getTodayDate() {
      const today = new Date();
      const year = today.getFullYear();
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const day = String(today.getDate()).padStart(2, '0');
      return `${day}-${month}-${year}`;
    }

    function formatDateToBangla(dateStr) {
      if (!dateStr) return '';

      try {
        if (/^\d{2}-\d{2}-\d{4}$/.test(dateStr)) {
          return dateStr;
        }
        const [year, month, day] = dateStr.split('-');
        return `${day}-${month}-${year}`;
      } catch (error) {
        console.error("Date formatting error:", error, dateStr);
        return dateStr;
      }
    }

    function findBestMatchingSubject(subjectFromSheet) {
      if (!subjectFromSheet) return null;

      const cleanSubject = subjectFromSheet.toString().trim();
      for (const availableSubject of availableSubjects) {
        if (cleanSubject === availableSubject) {
          return availableSubject;
        }
      }
      return cleanSubject;
    }

    async function fetchData() {
      try {
        updateLoadingProgress(30);
        const res = await fetch(API_URL, {
          method: 'GET',
          headers: {
            'Accept': 'application/json'
          }
        });

        if (!res.ok) {
          throw new Error(`HTTP error! status: ${res.status}`);
        }

        updateLoadingProgress(60);
        const data = await res.json();
        if (data && data.ok) {
          updateLoadingProgress(90);
          console.log("API Response:", data);
          return data.rows || [];
        } else {
          throw new Error(data.error || "   ");
        }
      } catch (error) {
        console.error("   :", error);
        showNotification("   : " + error.message, true);
        return [];
      }
    }

    function normalizeRows(rows) {
      try {
        updateLoadingProgress(40);
        const sortedRows = rows.sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());

        sortedRows.forEach((row, index) => {
          row.globalId = index + 1;
        });

        updateLoadingProgress(60);
        const groupedBySubject = sortedRows.reduce((acc, row) => {
          const subjectFromSheet = row.subject || 'Unknown Subject';
          const matchedSubject = findBestMatchingSubject(subjectFromSheet) || subjectFromSheet;
          if (!acc[matchedSubject]) {
            acc[matchedSubject] = [];
          }
          acc[matchedSubject].push(row);
          return acc;
        }, {});

        const specialFolders = ["", "  ", "  ", ""]; // Changed from '' to ''

        const normalizedRows = [];
        Object.keys(groupedBySubject).forEach(subject => {
          const subjectRows = groupedBySubject[subject].sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());
          subjectRows.forEach((row, index) => {
            const timestamp = row.timestamp || '';
            let link = row.link || '#';
            if (specialFolders.includes(subject)) {
              link = row.file || row.link || '#';
            }
            const title = row.title || (subject === '' ? '' : subject === '' ? '' : ' ');
            const date = getDateFromTimestamp(timestamp);
            const time = getTimeFromTimestamp(timestamp);
            const displaySerial = index + 1;
            const type = specialFolders.includes(subject) ? 'special' : subject === '' ? 'mission' : subject === '' ? 'exam' : 'class';

            normalizedRows.push({
              subject: subject,
              originalSubject: row.subject,
              link: link,
              title: title,
              date: date,
              time: time,
              displaySerial: displaySerial,
              timestamp: timestamp,
              globalId: row.globalId,
              type: type
            });
          });
        });

        updateLoadingProgress(80);
        return normalizedRows;
      } catch (error) {
        console.error("Rows normalization error:", error);
        return [];
      }
    }

    function isExamTimeExpired(timestamp) {
      if (!timestamp) return false;
      try {
        const examTime = new Date(timestamp).getTime();
        const now = new Date().getTime();
        const twentyFourHoursInMs = 24 * 60 * 60 * 1000;
        return (now - examTime) > twentyFourHoursInMs;
      } catch (error) {
        console.error("Exam expiry check error:", error, timestamp);
        return false;
      }
    }

    function filterClassesByTimeRange(range) {
      const now = new Date();
      const today = getTodayDate();

      if (range === 'today') {
        return allClasses.filter(cls => cls && cls.date === today);
      } else if (range === 'all') {
        return allClasses;
      }

      const weekAgo = new Date(now.setDate(now.getDate() - 7));
      const monthAgo = new Date(now.setMonth(now.getMonth() - 1));

      return allClasses.filter(cls => {
        if (!cls || !cls.date) return false;
        const classDateParts = cls.date.split('-');
        const classDate = new Date(`${classDateParts[2]}-${classDateParts[1]}-${classDateParts[0]}`);
        
        if (range === 'week') {
          return classDate >= weekAgo && classDate <= new Date();
        } else if (range === 'month') {
          return classDate >= monthAgo && classDate <= new Date();
        }
        return true;
      });
    }

    function groupClassesBySubject(classes) {
      if (groupedClassesCache[JSON.stringify(classes)]) {
        return groupedClassesCache[JSON.stringify(classes)];
      }

      const grouped = classes.reduce((acc, cls) => {
        if (!cls || !cls.subject) return acc;
        if (!acc[cls.subject]) {
          acc[cls.subject] = [];
        }
        acc[cls.subject].push(cls);
        return acc;
      }, {});

      Object.keys(grouped).forEach(subject => {
        grouped[subject].sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());
      });

      groupedClassesCache[JSON.stringify(classes)] = grouped;
      return grouped;
    }

    function renderTodayClassesSummary(classes) {
      const container = $('#today-classes-body');
      const sortValue = $('#sort-classes').value;

      if (!classes || classes.length === 0) {
        container.innerHTML = `<tr><td colspan="3" class="bangla-font" style="text-align: center; padding: 20px;">     </td></tr>`;
        return;
      }

      let tableHTML = '';
      classes.forEach(cls => {
        if (!cls) return;
        const displayValue = sortValue === 'today' ? cls.time : cls.date;
        tableHTML += `
          <tr data-subject="${cls.subject}" data-timestamp="${cls.timestamp}">
            <td><span class="subject-badge bangla-font">${cls.subject}</span></td>
            <td class="class-info bangla-font">${cls.title}</td>
            <td class="bangla-font">${displayValue}</td>
          </tr>
        `;
      });
      container.innerHTML = tableHTML;

      $all('#today-classes-body tr').forEach(row => {
        row.addEventListener('click', () => {
          const subject = row.getAttribute('data-subject');
          highlightedClassTimestamp = row.getAttribute('data-timestamp');
          showSubjectPage(subject, true);
        });
      });
    }

    function renderCards(rows, root) {
      if (!rows || rows.length === 0) {
        root.innerHTML = '<div class="empty-state"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><p class="bangla-font">   </p></div>';
        return;
      }

      root.innerHTML = '';
      rows.forEach(r => {
        if (!r) return;

        const specialFolders = ["  ", "  ", ""]; // Changed from '' to ''
        let buttonText;
        let isExpired = false;

        if (specialFolders.includes(r.subject)) {
          buttonText = "";
        } else if (r.subject === "") {
          buttonText = "  ";
        } else if (r.subject === "") {
          buttonText = "  ";
          isExpired = isExamTimeExpired(r.timestamp);
        } else {
          buttonText = " ";
        }

        const card = document.createElement('div');
        card.className = 'card fade-in';
        card.setAttribute('data-timestamp', r.timestamp);
        if (highlightedClassTimestamp === r.timestamp) {
          card.classList.add('highlight');
          setTimeout(() => {
            card.classList.remove('highlight');
            highlightedClassTimestamp = null;
          }, 5000);
        }
        const idPrefix = r.type === 'mission' ? 'm' : r.type === 'exam' ? 'e' : 'c';
        const trackId = idPrefix + r.globalId;
        const onclickAttr = `onclick="trackItem('${trackId}', '${r.type}')"`
        card.innerHTML = `
          <span class="card-badge bangla-font"> ${r.displaySerial}</span>
          <div class="subject"><i class="fas fa-book"></i> <span class="bangla-font">${r.subject}</span></div>
          <div class="video-title bangla-font">${r.title}</div>
          <div class="time"><i class="fas fa-clock"></i> ${r.time} | <span class="bangla-font">${r.date}</span></div>
          ${r.subject === "" && isExpired ? '<div class="exam-expiry-notice bangla-font"><i class="fas fa-exclamation-triangle"></i>        </div>' : ''}
          <a class="btn" target="_blank" rel="noopener" href="${r.link}" ${onclickAttr}><i class="fas fa-play-circle"></i> <span class="bangla-font">${buttonText}</span></a>
        `;
        root.appendChild(card);
      });
    }

    function filterTodayClasses(classes) {
      const today = getTodayDate();
      return classes.filter(cls => cls && cls.date === today);
    }

    function similarity(s1, s2) {
      s1 = s1.toLowerCase();
      s2 = s2.toLowerCase();
      const m = s1.length;
      const n = s2.length;
      const dp = Array.from({ length: m + 1 }, () => Array(n + 1).fill(0));
      for (let i = 0; i <= m; i++) dp[i][0] = i;
      for (let j = 0; j <= n; j++) dp[0][j] = j;
      for (let i = 1; i <= m; i++) {
        for (let j = 1; j <= n; j++) {
          const cost = s1[i - 1] === s2[j - 1] ? 0 : 1;
          dp[i][j] = Math.min(
            dp[i - 1][j] + 1,
            dp[i][j - 1] + 1,
            dp[i - 1][j - 1] + cost
          );
        }
      }
      const distance = dp[m][n];
      const maxLen = Math.max(m, n);
      return maxLen ? (maxLen - distance) / maxLen : 0;
    }

    function maxWordSimilarity(searchTerm, title) {
      const words = title.toLowerCase().split(/\s+/);
      let maxSim = 0;
      words.forEach(word => {
        const sim = similarity(searchTerm, word);
        if (sim > maxSim) maxSim = sim;
      });
      const fullSim = similarity(searchTerm, title.toLowerCase());
      return Math.max(maxSim, fullSim);
    }

    function renderSearchResults(results) {
      const container = $('#search-results');
      if (results.length === 0) {
        container.style.display = 'none';
        container.innerHTML = '';
        return;
      }
      
      container.style.display = 'flex';
      container.innerHTML = '';
      results.forEach(res => {
        const item = document.createElement('div');
        item.className = 'search-result-item';
        item.innerHTML = `<span class="title bangla-font">${res.title}</span><span class="subject bangla-font">(${res.subject})</span>`;
        item.addEventListener('click', () => {
          highlightedClassTimestamp = res.timestamp;
          showSubjectPage(res.subject, true);
          container.innerHTML = '';
          $('#search-subjects').value = '';
          container.style.display = 'none';
        });
        container.appendChild(item);
      });
    }

    // Slideshow functionality
    function initSlideshow() {
      const images = [
        'https://example.com/image1.jpg',
        'https://example.com/image2.jpg',
        'https://example.com/image3.jpg',
        'https://example.com/image4.jpg'
      ];
      
      const slideshowImages = document.querySelectorAll('.slideshow-image');
      let currentIndex = 0;
      
      function showNextImage() {
        slideshowImages.forEach((img, index) => {
          img.classList.remove('active');
          if (index === currentIndex) {
            img.classList.add('active');
          }
        });
        currentIndex = (currentIndex + 1) % images.length;
      }
      
      // Add click event to pause slideshow
      slideshowImages.forEach(img => {
        img.addEventListener('click', function() {
          if (!isSlideshowPaused) {
            clearInterval(slideshowInterval);
            isSlideshowPaused = true;
          } else {
            slideshowInterval = setInterval(showNextImage, 4000);
            isSlideshowPaused = false;
          }
        });
      });
      
      // Initial show
      showNextImage();
      
      // Change every 4 seconds
      slideshowInterval = setInterval(showNextImage, 4000);
    }

    async function loadInitialData() {
      showLoadingOverlay();
      updateLoadingProgress(10);
      if (!checkLoginExpiry()) {
        logout();
        return;
      }

      const rows = await fetchData();
      updateLoadingProgress(95);
      allClasses = normalizeRows(rows);
      renderTodayClassesSummary(filterTodayClasses(allClasses));

      showAddClassButton();
      showDashboardButton();
      
      // Initialize slideshow
      initSlideshow();
      
      setTimeout(() => {
        hideLoadingOverlay();
        updateLoadingProgress(0);
      }, 100);
    }

    function showSubjectPage(subject, fromTable = false) {
      currentSubject = subject;
      mainScrollPosition = window.scrollY;
      history.pushState({ page: 'subject' }, '');
      mainPage.style.display = 'none';
      subjectPage.style.display = 'block';
      $('#subject-title').innerHTML = `<i class="fas fa-book"></i> <span class="bangla-font">${subject}</span>`;
      scrollToTop();

      const classes = filterClassesByTimeRange('all');
      const groupedClasses = groupClassesBySubject(classes);
      const subjectClasses = groupedClasses[subject] || [];

      const root = $('#classGrid');
      renderCards(subjectClasses, root);

      if (fromTable) {
        const highlightedCard = $all('#classGrid .card').find(card => card.getAttribute('data-timestamp') === highlightedClassTimestamp);
        if (highlightedCard) {
          highlightedCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }

      $('#search').value = '';
    }

    function returnToMainPage() {
      subjectPage.style.display = 'none';
      mainPage.style.display = 'block';
      $('#search-subjects').value = '';
      const pills = $all('.subject-link');
      pills.forEach(pill => {
        pill.style.display = 'flex';
      });
      window.scrollTo(0, mainScrollPosition);
    }

    function initializeEventListeners() {
      $('#sort-classes').addEventListener('change', () => {
        const range = $('#sort-classes').value;
        const filteredClasses = filterClassesByTimeRange(range);
        renderTodayClassesSummary(filteredClasses);
      });

      $('#search-subjects').addEventListener('input', () => {
        const searchTerm = $('#search-subjects').value.trim().toLowerCase();
        const resultsContainer = $('#search-results');
        if (!searchTerm) {
          resultsContainer.innerHTML = '';
          resultsContainer.style.display = 'none';
          return;
        }
        const filtered = allClasses
          .map(cls => ({ ...cls, sim: maxWordSimilarity(searchTerm, cls.title) }))
          .filter(res => res.sim > 0.3)
          .sort((a, b) => b.sim - a.sim);
        renderSearchResults(filtered);
      });

      $all('.subject-link').forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          const subject = link.getAttribute('data-name');
          showSubjectPage(subject);
        });
      });

      $('#search').addEventListener('input', () => {
        const searchTerm = $('#search').value.trim().toLowerCase();
        const classes = filterClassesByTimeRange('all');
        const groupedClasses = groupClassesBySubject(classes);
        const subjectClasses = groupedClasses[currentSubject] || [];
        const filteredClasses = subjectClasses.filter(cls => cls.title.toLowerCase().includes(searchTerm));
        
        const sortOrder = $('#sort').value;
        if (sortOrder === 'asc') {
          filteredClasses.sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());
        } else {
          filteredClasses.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());
        }
        
        renderCards(filteredClasses, $('#classGrid'));
      });

      $('#sort').addEventListener('change', () => {
        const searchTerm = $('#search').value.trim().toLowerCase();
        const classes = filterClassesByTimeRange('all');
        const groupedClasses = groupClassesBySubject(classes);
        const subjectClasses = groupedClasses[currentSubject] || [];
        const filteredClasses = subjectClasses.filter(cls => cls.title.toLowerCase().includes(searchTerm));
        
        const sortOrder = $('#sort').value;
        if (sortOrder === 'asc') {
          filteredClasses.sort((a, b) => new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());
        } else {
          filteredClasses.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());
        }
        
        renderCards(filteredClasses, $('#classGrid'));
      });

      $('.back-button').addEventListener('click', e => {
        e.preventDefault();
        history.back();
      });

      window.addEventListener('popstate', (event) => {
        if (event.state && event.state.page === 'subject') {
          showSubjectPage(currentSubject);
        } else {
          returnToMainPage();
        }
      });

      $('#refresh-data-btn').addEventListener('click', async () => {
        showLoadingOverlay();
        updateLoadingProgress(10);
        const rows = await fetchData();
        allClasses = normalizeRows(rows);
        groupedClassesCache = {};
        renderTodayClassesSummary(filterClassesByTimeRange($('#sort-classes').value));
        
        if (subjectPage.style.display === 'block' && currentSubject) {
          showSubjectPage(currentSubject);
        }
        
        hideLoadingOverlay();
        showNotification("  !");
      });
    }

    /* Dashboard Script */
    const motivationalQuotes = [
      "   ,    ! ",
      "       ! ",
      "      ! ",
      "      ! "
    ];

    const badges = [
      { name: 'Starter', threshold: 0, class: 'badge-starter', icon: '' },
      { name: 'Bronze Cup', threshold: 30, class: 'badge-bronze', icon: '' },
      { name: 'Silver Cup', threshold: 50, class: 'badge-silver', icon: '' },
      { name: 'Gold Cup', threshold: 65, class: 'badge-gold', icon: '' },
      { name: 'Platinum Trophy', threshold: 80, class: 'badge-platinum', icon: '' }
    ];

    function parseDate(dateStr) {
      if (!dateStr) return new Date(0);
      const [day, month, year] = dateStr.split('-').map(Number);
      return new Date(year, month - 1, day);
    }

    function saveStudentData(name, joinDate, lastLogin, lastActivity, completedItems) {
      localStorage.setItem(DASHBOARD_STORAGE_KEYS.STUDENT_NAME, name || '');
      localStorage.setItem(DASHBOARD_STORAGE_KEYS.JOIN_DATE, joinDate || getTodayDate());
      localStorage.setItem(DASHBOARD_STORAGE_KEYS.LAST_LOGIN, lastLogin || new Date().toISOString());
      localStorage.setItem(DASHBOARD_STORAGE_KEYS.LAST_ACTIVITY, lastActivity || new Date().toISOString());
      localStorage.setItem(DASHBOARD_STORAGE_KEYS.COMPLETED_ITEMS, JSON.stringify(completedItems || []));
    }

    function getStudentData() {
      return {
        name: localStorage.getItem(DASHBOARD_STORAGE_KEYS.STUDENT_NAME) || '',
        joinDate: localStorage.getItem(DASHBOARD_STORAGE_KEYS.JOIN_DATE) || getTodayDate(),
        lastLogin: localStorage.getItem(DASHBOARD_STORAGE_KEYS.LAST_LOGIN) || new Date().toISOString(),
        lastActivity: localStorage.getItem(DASHBOARD_STORAGE_KEYS.LAST_ACTIVITY) || new Date().toISOString(),
        completedItems: JSON.parse(localStorage.getItem(DASHBOARD_STORAGE_KEYS.COMPLETED_ITEMS)) || []
      };
    }

    // Tracking function
    window.trackItem = function(id, type) {
      const studentData = getStudentData();
      let completed = studentData.completedItems;
      if (completed.includes(id)) {
        return;
      }

      if (type === 'class') {
        let scrolled = false;
        const scrollListener = () => { scrolled = true; };
        window.addEventListener('scroll', scrollListener);

        const minTime = 0;
        const maxTime = 0;
        const randomTime = Math.random() * (maxTime - minTime) + minTime;

        setTimeout(() => {
          window.removeEventListener('scroll', scrollListener);
          if (!scrolled) {
            completed.push(id);
            saveStudentData(studentData.name, studentData.joinDate, new Date().toISOString(), new Date().toISOString(), completed);
            showNotification(`${type}  !`, false);
          } else {
            showNotification('  ,    ', true);
          }
        }, randomTime * 1000);
      } else {
        completed.push(id);
        saveStudentData(studentData.name, studentData.joinDate, new Date().toISOString(), new Date().toISOString(), completed);
        showNotification(`${type}  !`, false);
      }
    };

    function getItemsFromAllClasses() {
      const items = {
        classes: [],
        missions: [],
        exams: []
      };

      allClasses.forEach(cls => {
        const idPrefix = cls.type === 'mission' ? 'm' : cls.type === 'exam' ? 'e' : 'c';
        const trackId = idPrefix + cls.globalId;
        const item = { id: trackId, addDate: cls.date };
        if (cls.type === 'mission') {
          items.missions.push(item);
        } else if (cls.type === 'exam') {
          items.exams.push(item);
        } else {
          items.classes.push(item);
        }
      });

      return items;
    }

    function calculateStats(joinDate, completed) {
      const joinDateObj = parseDate(joinDate);
      const items = getItemsFromAllClasses();

      function filterItems(itemList, isAfter) {
        return itemList.filter(item => {
          const addDateObj = parseDate(item.addDate);
          return isAfter ? addDateObj >= joinDateObj : addDateObj < joinDateObj;
        });
      }

      const afterClasses = filterItems(items.classes, true);
      const beforeClasses = filterItems(items.classes, false);
      const afterMissions = filterItems(items.missions, true);
      const beforeMissions = filterItems(items.missions, false);
      const afterExams = filterItems(items.exams, true);
      const beforeExams = filterItems(items.exams, false);

      const doneAfterClasses = afterClasses.filter(item => completed.includes(item.id)).length;
      const doneBeforeClasses = beforeClasses.filter(item => completed.includes(item.id)).length;
      const doneAfterMissions = afterMissions.filter(item => completed.includes(item.id)).length;
      const doneBeforeMissions = beforeMissions.filter(item => completed.includes(item.id)).length;
      const doneAfterExams = afterExams.filter(item => completed.includes(item.id)).length;
      const doneBeforeExams = beforeExams.filter(item => completed.includes(item.id)).length;

      const totalAll = items.classes.length + items.missions.length + items.exams.length;
      const totalCompleted = completed.length;
      const progress = totalAll > 0 ? (totalCompleted / totalAll) * 100 : 0;

      return {
        after: {
          totalClasses: afterClasses.length,
          doneClasses: doneAfterClasses,
          pendingClasses: afterClasses.length - doneAfterClasses,
          totalMissions: afterMissions.length,
          doneMissions: doneAfterMissions,
          pendingMissions: afterMissions.length - doneAfterMissions,
          totalExams: afterExams.length,
          doneExams: doneAfterExams,
          pendingExams: afterExams.length - doneAfterExams
        },
        before: {
          totalClasses: beforeClasses.length,
          doneClasses: doneBeforeClasses,
          pendingClasses: beforeClasses.length - doneBeforeClasses,
          totalMissions: beforeMissions.length,
          doneMissions: doneBeforeMissions,
          pendingMissions: beforeMissions.length - doneBeforeMissions,
          totalExams: beforeExams.length,
          doneExams: doneBeforeExams,
          pendingExams: beforeExams.length - doneBeforeExams
        },
        progress: progress.toFixed(1)
      };
    }

    function getCurrentBadge(progress) {
      for (let i = badges.length - 1; i >= 0; i--) {
        if (progress >= badges[i].threshold) {
          return badges[i];
        }
      }
      return badges[0];
    }

    function saveNotes(notes) {
      localStorage.setItem(DASHBOARD_STORAGE_KEYS.NOTES, JSON.stringify(notes));
    }

    function getNotes() {
      return JSON.parse(localStorage.getItem(DASHBOARD_STORAGE_KEYS.NOTES)) || [];
    }

    function renderNotes() {
      const notesList = $('#notes-list');
      const notes = getNotes();
      notesList.innerHTML = '';
      notes.forEach((note, index) => {
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${note}</span>
          <button onclick="deleteNote(${index})"> </button>
        `;
        notesList.appendChild(li);
      });
    }

    window.deleteNote = function(index) {
      let notes = getNotes();
      notes.splice(index, 1);
      saveNotes(notes);
      renderNotes();
    };

    function showDashboard() {
      const studentData = getStudentData();
      const isNewUser = !localStorage.getItem(DASHBOARD_STORAGE_KEYS.STUDENT_NAME);
      const randomQuote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
      const stats = calculateStats(studentData.joinDate, studentData.completedItems);
      const currentBadge = getCurrentBadge(stats.progress);
      const lastActivityDate = new Date(studentData.lastActivity);
      const daysSinceActivity = (new Date() - lastActivityDate) / (1000 * 60 * 60 * 24);

      const dashboardBody = $('#dashboard-body');
      dashboardBody.innerHTML = `
        ${isNewUser ? `
          <div class="alert-box success bangla-font">
            <i class="fas fa-info-circle"></i>       !
          </div>
          <form class="name-input-form">
            <input type="text" id="student-name-input" placeholder="  " class="bangla-font">
            <button type="submit" class="bangla-font">  </button>
          </form>
        ` : `
          <header class="modal-header bangla-font">
            <h2>, ${studentData.name}!</h2>
            <div class="badge-current ${currentBadge.class}" id="current-badge">${currentBadge.icon} ${currentBadge.name}</div>
            <div id="close-btn" class="close-btn"></div>
          </header>

          <section class="motivation">
            <p id="motivation-text" class="bangla-font">${randomQuote}</p>
          </section>

          <section class="stats after-join bangla-font">
            <h2>- </h2>
            <table class="stats-table">
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td class="total">${stats.after.totalClasses}</td>
                  <td class="done">${stats.after.doneClasses}</td>
                  <td class="pending">${stats.after.pendingClasses}</td>
                </tr>
                <tr>
                  <td></td>
                  <td class="total">${stats.after.totalMissions}</td>
                  <td class="done">${stats.after.doneMissions}</td>
                  <td class="pending">${stats.after.pendingMissions}</td>
                </tr>
                <tr>
                  <td></td>
                  <td class="total">${stats.after.totalExams}</td>
                  <td class="done">${stats.after.doneExams}</td>
                  <td class="pending">${stats.after.pendingExams}</td>
                </tr>
              </tbody>
            </table>
          </section>

          <section class="stats before-join bangla-font">
            <h2>- </h2>
            <table class="stats-table">
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td class="total">${stats.before.totalClasses}</td>
                  <td class="done">${stats.before.doneClasses}</td>
                  <td class="pending">${stats.before.pendingClasses}</td>
                </tr>
                <tr>
                  <td></td>
                  <td class="total">${stats.before.totalMissions}</td>
                  <td class="done">${stats.before.doneMissions}</td>
                  <td class="pending">${stats.before.pendingMissions}</td>
                </tr>
                <tr>
                  <td></td>
                  <td class="total">${stats.before.totalExams}</td>
                  <td class="done">${stats.before.doneExams}</td>
                  <td class="pending">${stats.before.pendingExams}</td>
                </tr>
              </tbody>
            </table>
          </section>

          <section id="alarms" class="alarms bangla-font"></section>

          <section class="progress-section bangla-font">
            <h3> </h3>
            <div class="progress-bar">
              <div class="progress-bar-fill" style="width: ${stats.progress}%"></div>
            </div>
            <p>${stats.progress}%</p>
          </section>

          <div class="badges-dropdown bangla-font">
            <label for="badges-select">:</label>
            <select id="badges-select">
              ${badges.map(badge => `
                <option ${stats.progress >= badge.threshold ? '' : 'disabled'}>${badge.icon} ${badge.name} ${stats.progress >= badge.threshold ? '()' : '()'}</option>
              `).join('')}
            </select>
          </div>

          <section class="notes-section bangla-font">
            <h3> </h3>
            <textarea id="note-input" placeholder="  ..."></textarea>
            <button id="add-note-btn">  </button>
            <ul id="notes-list"></ul>
          </section>
        `}
      `;

      if (isNewUser) {
        const form = dashboardBody.querySelector('.name-input-form');
        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const nameInput = $('#student-name-input').value.trim();
          if (nameInput) {
            saveStudentData(nameInput, getTodayDate(), new Date().toISOString(), new Date().toISOString(), []);
            showNotification('   !', false);
            showDashboard();
          } else {
            showNotification('     ', true);
          }
        });
      } else {
        localStorage.setItem(DASHBOARD_STORAGE_KEYS.LAST_LOGIN, new Date().toISOString());

        const alarms = $('#alarms');
        if (stats.before.pendingClasses + stats.before.pendingMissions + stats.before.pendingExams > 0) {
          alarms.innerHTML += `<div class="alert-box warning"><i class="fas fa-exclamation-triangle"></i>   ,            </div>`;
        }
        if (daysSinceActivity > 7) {
          alarms.innerHTML += `<div class="alert-box warning"><i class="fas fa-exclamation-triangle"></i>       !            </div>`;
        }
        if (daysSinceActivity > 30) {
          alarms.innerHTML += `<div class="alert-box warning"><i class="fas fa-exclamation-triangle"></i>       !            </div>`;
        }
        if (stats.progress < 10 && !isNewUser) {
          alarms.innerHTML += `<div class="alert-box warning"><i class="fas fa-exclamation-triangle"></i>    !     </div>`;
        }
        if (stats.after.pendingClasses > 5) {
          alarms.innerHTML += `<div class="alert-box warning"><i class="fas fa-exclamation-triangle"></i>     !   </div>`;
        }

        const closeBtn = $('#close-btn');
        closeBtn.addEventListener('click', () => {
          const dashboardModal = $('#dashboard-modal');
          dashboardModal.classList.remove('show');
        });

        renderNotes();
        const addNoteBtn = $('#add-note-btn');
        addNoteBtn.addEventListener('click', () => {
          const noteInput = $('#note-input');
          const noteText = noteInput.value.trim();
          if (noteText) {
            let notes = getNotes();
            notes.push(noteText);
            saveNotes(notes);
            renderNotes();
            noteInput.value = '';
            showNotification('   !', false);
          } else {
            showNotification('   ', true);
          }
        });
      }

      const dashboardModal = $('#dashboard-modal');
      dashboardModal.classList.add('show');
    }

    const dashboardBtn = $('#dashboard-btn');
    if (dashboardBtn) {
      dashboardBtn.addEventListener('click', () => {
        showDashboard();
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Show default page first
      document.getElementById('default-page').style.display = 'block';
      loginPage.style.display = 'none';
      mainPage.style.display = 'none';
      subjectPage.style.display = 'none';

      initializeEventListeners();
      initDynamicPlaceholder();
    });

    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzEX1EuBWpSMlZ9zbXs1lAVQkOTdeV779SsD6SF6RllQGMYxcHJu30p5BPzW7O-PAbysg/exec";

    function showNotification(message, isError=false){
      const notification = $('#notification');
      notification.innerHTML = `<i class="${isError?'fas fa-exclamation-circle':'fas fa-check-circle'}"></i> <span class="bangla-font">${message}</span>`;
      notification.className=`notification ${isError?'error':'success'}`;
      notification.classList.add('show');
      setTimeout(()=>notification.classList.remove('show'),3000);
    }

    let storedName = localStorage.getItem('userName') || '';

    function showNameModal(){ $('#nameModal').style.display='flex'; }
    function hideNameModal(){ $('#nameModal').style.display='none'; }

    function saveName(event){
      event.preventDefault();
      const name = $('#userName').value.trim();
      if (name) {
        localStorage.setItem('userName', name);
        storedName = name;
        hideNameModal();
        showForm();
      } else {
        showNotification(" !", true);
      }
    }

    function handleFormClick() {
      if (!storedName) {
        showNameModal();
      } else {
        showForm();
      }
    }

    function showForm(){ 
      $('#formModal').style.display='flex'; 
      $('#myForm').reset(); 
      $('#name').value = storedName;
    }

    function hideForm(){ $('#formModal').style.display='none'; }

    function showSubmissions(){ 
      $('#submissionsModal').style.display='flex'; 
      $('#submissions-list').innerHTML = '<div style="text-align:center;padding:40px;color:var(--text-muted)" class="bangla-font"> ...</div>';
      loadSubmissions(); 
    }

    function hideSubmissions(){ $('#submissionsModal').style.display='none'; }

    function submitForm(event){
      event.preventDefault();
      const submitBtn = $('#submitBtn');
      submitBtn.classList.add('loading');
      submitBtn.disabled = true;
      const form = $('#myForm');
      const data = {
        name: form.name.value.trim(),
        batch: form.batch.value,
        message: form.message.value.trim()
      };

      fetch(WEB_APP_URL,{
        method:'POST',
        body:JSON.stringify(data)
      })
      .then(res=>res.text())
      .then(txt=>{
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
        if(txt.startsWith("Success")){
          form.reset(); hideForm(); showSuccessMessage();
        }else {
          showNotification("  !   ", true);
        }
      })
      .catch(()=>{
        submitBtn.classList.remove('loading');
        submitBtn.disabled = false;
        showNotification("  !   ", true);
      });
    }

    function showSuccessMessage(){
      const successMessage = $('#successMessage');
      successMessage.style.display='block';
      setTimeout(()=>successMessage.style.display='none',3000);
    }

    function loadSubmissions() {
      fetch(WEB_APP_URL + '?action=getSubmissions')
        .then(res => res.json())
        .then(data => {
          const list = $('#submissions-list');
          list.innerHTML = '';
          
          const alim26Submissions = data.filter(item => 
            item.batch && item.batch.toString().toLowerCase().includes('alim-26')
          );
          
          alim26Submissions.sort((a, b) => new Date(b.timestamp || b.time) - new Date(a.timestamp || a.time));
          
          if (alim26Submissions.length === 0) {
            list.innerHTML = '<div style="text-align:center;padding:40px;color:var(--text-muted)" class="bangla-font">ALIM-26    </div>';
            return;
          }
          
          alim26Submissions.forEach(item => {
            const div = document.createElement('div');
            div.className = 'submission-item';
            div.innerHTML = `
              <div class="submission-name bangla-font">${item.name}</div>
              <div class="submission-batch bangla-font">: ${item.batch}</div>
              <div class="submission-message bangla-font">${item.message}</div>
              ${item.reply ? `<div class="submission-reply bangla-font">: ${item.reply}</div>` : ''}
              <div class="submission-time bangla-font">${item.time}</div>
            `;
            list.appendChild(div);
          });
        })
        .catch(() => showNotification("  !   ", true));
    }

    $('#form-button').addEventListener('click', handleFormClick);
    $('#submissions-button').addEventListener('click',showSubmissions);
    window.addEventListener('click',(e)=>{ 
      if(e.target==$('#nameModal')) hideNameModal(); 
      if(e.target==$('#formModal')) hideForm(); 
      if(e.target==$('#submissionsModal')) hideSubmissions(); 
    });

    function updateClock() {
      const now = new Date();
      const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
      const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };

      let timeStr = now.toLocaleTimeString('bn-BD', timeOptions);
      timeStr = timeStr.replace(/(AM|PM)/, '<small>$1</small>');
      const dateStr = now.toLocaleDateString('bn-BD', dateOptions);

      const clockTime = document.getElementById('clock-time');
      const clockDate = document.getElementById('clock-date');
      const examCountdown = document.getElementById('exam-countdown');

      if (clockTime && clockDate && examCountdown) {
        clockTime.innerHTML = timeStr;
        clockDate.textContent = dateStr;

        const examDate = new Date(2026, 1, 8);
        let diff = examDate - now;

        if (diff < 0) {
          examCountdown.textContent = '  !';
        } else {
          const months = Math.floor(diff / (1000 * 60 * 60 * 24 * 30));
          const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));
          examCountdown.textContent = `  : ${months}  ${days}  *`;
        }
      }
    }

    function setButtonVisibility() {
      const role = getUserRole();
      const formButton = $('#form-button');
      const submissionsButton = $('#submissions-button');
      
      formButton.style.display = 'none';
      submissionsButton.style.display = 'none';
      
      if (role === 'user' || role === 'editor') {
        formButton.style.display = 'inline-flex';
      } 
      if (role === 'owner' || role === 'editor') {
        submissionsButton.style.display = 'inline-flex';
      }
    }

    // Dynamic placeholder functionality
    function initDynamicPlaceholder() {
      const searchInput = $('#search-subjects');
      const placeholders = [
        ' ',
        ' ?',
        '',
        ' ',
        '',
        '',
        '',
        '',
      ];
      
      let currentIndex = 0;
      
      function updatePlaceholder() {
        searchInput.placeholder = placeholders[currentIndex];
        currentIndex = (currentIndex + 1) % placeholders.length;
      }
      
      setInterval(updatePlaceholder, 4000);
      updatePlaceholder();
    }

    // Initialize clock
    updateClock();
    setInterval(updateClock, 1000);
  </script>
</body>
</html>
